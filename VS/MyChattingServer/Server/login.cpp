#include "login.h"


// ====================================================================================================================================
// Setter, Getter
// ====================================================================================================================================
void loginRequest::setId(string id) {
	id = id;
}

string loginRequest::getId() {
	return id;
}

void loginRequest::setPwd(string pwd) {
	pwd = pwd;
}

string loginRequest::getPwd() {
	return pwd;
}

// ====================================================================================================================================
// 현재 가진 정보를 바탕으로 메세지를 보내기 위한 string으로 만들어 반환한다.
// ====================================================================================================================================
string loginRequest::encodeMessage() {
	string msg = "";
	msg += this->getCode();
	msg += "|";
	msg += this->getId();
	msg += "|";
	msg += this->getPwd();

	return msg;
}

// ====================================================================================================================================
// string을 잘라서 순서대로 넣어서 디코딩한다.
// ====================================================================================================================================
void loginRequest::decodeMessage() {
	vector<string> result = msg_format::split(getMsg());
	
	setCode(static_cast<messageCode>(stoi(result[0])));
	setId(result[1]);
	setPwd(result[2]);
}

// ====================================================================================================================================
// 해당 메세지를 처리한다.
// ====================================================================================================================================
optional<msg_format*> loginRequest::processMessage() {
	// 먼저 데이터베이스에서 아아디, 비밀번호를 검색한다.
}